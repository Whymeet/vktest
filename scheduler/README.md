# VK Ads Manager Scheduler

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ VK Ads Manager —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏.

## –û–ø–∏—Å–∞–Ω–∏–µ

Scheduler - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ daemon –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –≥—Ä—É–ø–ø VK Ads Manager. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –≥—Ä—É–ø–ø.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **‚è∞ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ –º–∏–Ω—É—Ç–∞—Ö
- **üåô –¢–∏—Ö–∏–µ —á–∞—Å—ã** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã –≤ –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è
- **üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **üìä –õ–∏–º–∏—Ç –∑–∞–ø—É—Å–∫–æ–≤** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
- **üìù –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- **üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful handling –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π `cfg/config.json`:

```json
{
  "scheduler": {
    "enabled": true,
    "interval_minutes": 60,
    "max_runs": 0,
    "start_delay_seconds": 10,
    "retry_on_error": true,
    "retry_delay_minutes": 5,
    "max_retries": 3,
    "quiet_hours": {
      "enabled": true,
      "start": "23:00",
      "end": "08:00"
    }
  }
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `enabled` | –í–∫–ª—é—á–µ–Ω –ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ | `false` |
| `interval_minutes` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ (–º–∏–Ω—É—Ç—ã) | `60` |
| `max_runs` | –ú–∞–∫—Å–∏–º—É–º –∑–∞–ø—É—Å–∫–æ–≤ (0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ) | `0` |
| `start_delay_seconds` | –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º | `10` |
| `retry_on_error` | –ü–æ–≤—Ç–æ—Ä—è—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö | `true` |
| `retry_delay_minutes` | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–∞–º–∏ | `5` |
| `max_retries` | –ú–∞–∫—Å–∏–º—É–º –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ | `3` |

### –¢–∏—Ö–∏–µ —á–∞—Å—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `quiet_hours.enabled` | –í–∫–ª—é—á–µ–Ω—ã –ª–∏ —Ç–∏—Ö–∏–µ —á–∞—Å—ã |
| `quiet_hours.start` | –ù–∞—á–∞–ª–æ —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤ (HH:MM) |
| `quiet_hours.end` | –ö–æ–Ω–µ—Ü —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤ (HH:MM) |

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—É—Å–∫
python scheduler/scheduler_main.py

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python scheduler/scheduler_main.py --config path/to/config.json

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
python scheduler/scheduler_main.py --status
```

### –ö–∞–∫ daemon (Windows)

```powershell
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
Start-Process python -ArgumentList "scheduler/scheduler_main.py" -WindowStyle Hidden

# –ò–ª–∏ —á–µ—Ä–µ–∑ nohup –≤ PowerShell
nohup python scheduler/scheduler_main.py &
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞

- **Ctrl+C** –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á–µ—Ä–µ–∑ Task Manager
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `"enabled": false` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ü–∏–∫–ª–µ)

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ –ø–∞–ø–∫–µ `scheduler/logs/`:

```
scheduler/logs/
‚îú‚îÄ‚îÄ vk_ads_scheduler_20251013_153000.log
‚îî‚îÄ‚îÄ vk_ads_scheduler_20251013_160000.log
```

–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –≤–∫–ª—é—á–∞–µ—Ç:
- –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫—É —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ—Å—Ç–æ–π —Ä–µ–∂–∏–º (–∫–∞–∂–¥—ã–π —á–∞—Å)

```json
{
  "scheduler": {
    "enabled": true,
    "interval_minutes": 60
  }
}
```

### 2. –†–∞–±–æ—á–∏–µ —á–∞—Å—ã (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç, —Å —Ç–∏—Ö–∏–º–∏ —á–∞—Å–∞–º–∏)

```json
{
  "scheduler": {
    "enabled": true,
    "interval_minutes": 30,
    "quiet_hours": {
      "enabled": true,
      "start": "22:00",
      "end": "09:00"
    }
  }
}
```

### 3. –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (5 –∑–∞–ø—É—Å–∫–æ–≤ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç)

```json
{
  "scheduler": {
    "enabled": true,
    "interval_minutes": 10,
    "max_runs": 5,
    "retry_on_error": false
  }
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:

```bash
python scheduler/scheduler_main.py --status
```

–í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- –°—Ç–∞—Ç—É—Å (–∑–∞–ø—É—â–µ–Ω/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –í—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –¢–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ `config.json`
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π `main.py`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –µ—Å–ª–∏ `enabled: false`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –¢–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (30 –º–∏–Ω—É—Ç)
- Graceful shutdown –ø–æ Ctrl+C
- –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤

## Troubleshooting

### –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `"enabled": true` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—É—Ç—å –∫ `main.py` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

### –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π  
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `scheduler/logs/`
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é VK API

### –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–∏—Ö–∏–µ —á–∞—Å—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `quiet_hours`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Ä–µ–º—è —É–∫–∞–∑–∞–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ HH:MM

### –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- –£–≤–µ–ª–∏—á—å—Ç–µ `interval_minutes`
- –í–∫–ª—é—á–∏—Ç–µ —Ç–∏—Ö–∏–µ —á–∞—Å—ã
- –£–º–µ–Ω—å—à–∏—Ç–µ `max_retries`